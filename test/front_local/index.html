<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interface de Test - Rent2Repay</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/ethers@6.14.1/dist/ethers.umd.min.js"></script>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üè† Interface de Test Rent2Repay</h1>
            <div class="network-info">
                <span id="network-status" class="network-disconnected">Non connect√©</span>
                <button id="connect-wallet" class="btn btn-primary">Connecter Wallet</button>
            </div>
        </header>

        <!-- Account Info -->
        <section class="account-section" id="account-section" style="display: none;">
            <div class="card">
                <h2>üîó Compte Connect√©</h2>
                <div class="account-info">
                    <p><strong>Adresse:</strong> <span id="account-address"></span></p>
                    <div class="token-balances">
                        <div>
                            <strong>ETH:</strong> <span id="eth-balance">0</span> ETH
                        </div>
                        <div>
                            <strong>WXDAI:</strong> <span id="wxdai-balance">0</span> WXDAI
                        </div>
                        <div>
                            <strong>USDC:</strong> <span id="usdc-balance">0</span> USDC
                        </div>
                        <div>
                            <strong>debtWXDAI:</strong> <span id="debt-wxdai-balance">0</span> debtWXDAI
                        </div>
                        <div>
                            <strong>debtUSDC:</strong> <span id="debt-usdc-balance">0</span> debtUSDC
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contract Info -->
        <section class="contract-section">
            <div class="card">
                <h2>üìã Informations du Contrat</h2>
                <div class="contract-info">
                    <p><strong>Adresse Rent2Repay:</strong> <span id="contract-address">-</span></p>
                    <p><strong>Adresse RMM:</strong> <span id="rmm-address">-</span></p>
                    <p><strong>Statut:</strong> <span id="contract-status">-</span></p>
                    <p><strong>Tokens autoris√©s:</strong> <span id="authorized-tokens">-</span></p>
                </div>
                <button id="refresh-contract-info" class="btn btn-secondary">üîÑ Actualiser</button>
            </div>
        </section>

        <!-- User Configuration -->
        <section class="user-config-section" id="user-config-section" style="display: none;">
            <div class="card">
                <h2>‚öôÔ∏è Configuration Utilisateur</h2>

                <!-- Current Config Display -->
                <div class="current-config">
                    <h3>Configuration Actuelle</h3>
                    <div id="current-user-config">
                        <p>Aucune configuration trouv√©e</p>
                    </div>
                </div>

                <!-- New Configuration Form -->
                <div class="config-form">
                    <h3>Nouvelle Configuration</h3>
                    <form id="configure-form">
                        <div class="form-group">
                            <label for="token-select">Token:</label>
                            <select id="token-select" required>
                                <option value="">S√©lectionner un token</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="weekly-limit">Limite Hebdomadaire:</label>
                            <input type="number" id="weekly-limit" placeholder="Ex: 100" step="0.01" min="0" required>
                        </div>
                        <button type="submit" class="btn btn-primary">üíæ Configurer</button>
                    </form>
                </div>

                <!-- Multi-token Configuration -->
                <div class="multi-config-form">
                    <h3>Configuration Multi-Tokens</h3>
                    <div id="multi-token-inputs">
                        <!-- Inputs will be added dynamically -->
                    </div>
                    <button id="add-token-config" class="btn btn-secondary">+ Ajouter Token</button>
                    <button id="configure-multi" class="btn btn-primary">üíæ Configurer Tous</button>
                </div>

                <!-- Revocation -->
                <div class="revocation-section">
                    <h3>R√©vocation</h3>
                    <div class="form-group">
                        <label for="revoke-token-select">Token √† r√©voquer:</label>
                        <select id="revoke-token-select">
                            <option value="">S√©lectionner un token</option>
                        </select>
                        <button id="revoke-token" class="btn btn-warning">üö´ R√©voquer Token</button>
                    </div>
                    <button id="revoke-all" class="btn btn-danger">üö´ R√©voquer Tout</button>
                </div>
            </div>
        </section>

        <!-- Repayment Testing -->
        <section class="repayment-section" id="repayment-section" style="display: none;">
            <div class="card">
                <h2>üí∞ Test de Remboursement</h2>

                <div class="repayment-form">
                    <form id="repayment-form">
                        <div class="form-group">
                            <label for="target-user">Adresse utilisateur cible:</label>
                            <input type="text" id="target-user" placeholder="0x..." required>
                            <button type="button" id="check-user" class="btn btn-secondary">üîç V√©rifier</button>
                        </div>

                        <div id="user-info" class="user-info" style="display: none;">
                            <!-- User info will be displayed here -->
                        </div>

                        <div class="form-group">
                            <label for="repay-token">Token de remboursement:</label>
                            <select id="repay-token" required>
                                <option value="">S√©lectionner un token</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="repay-amount">Montant:</label>
                            <input type="number" id="repay-amount" placeholder="Ex: 50" step="0.01" min="0" required>
                        </div>

                        <button type="submit" class="btn btn-primary">üí∏ Ex√©cuter Remboursement</button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Token Management -->
        <section class="token-management-section" id="token-management-section" style="display: none;">
            <div class="card">
                <h2>üîß Gestion des Tokens (Admin)</h2>

                <div class="admin-functions">
                    <div class="form-group">
                        <label for="new-token-address">Nouvelle adresse token:</label>
                        <input type="text" id="new-token-address" placeholder="0x...">
                        <button id="authorize-token" class="btn btn-primary">‚úÖ Autoriser</button>
                    </div>

                    <div class="form-group">
                        <label for="unauthorize-token-select">Token √† d√©sautoriser:</label>
                        <select id="unauthorize-token-select">
                            <option value="">S√©lectionner un token</option>
                        </select>
                        <button id="unauthorize-token" class="btn btn-warning">‚ùå D√©sautoriser</button>
                    </div>

                    <div class="emergency-functions">
                        <h3>üö® Fonctions d'Urgence</h3>
                        <button id="pause-contract" class="btn btn-warning">‚è∏Ô∏è Pause Contrat</button>
                        <button id="unpause-contract" class="btn btn-success">‚ñ∂Ô∏è D√©bloquer Contrat</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contr√¥les des Tokens Mock -->
        <section class="mock-controls-section">
            <div class="card">
                <h2>üß™ Contr√¥les des Tokens Mock</h2>
                <p>Mint ou burn des tokens pour vos tests</p>

                <div class="form-group">
                    <label for="mock-token-select">Token:</label>
                    <select id="mock-token-select">
                        <option value="">S√©lectionner un token</option>
                        <option value="WXDAI">WXDAI (Asset Token)</option>
                        <option value="USDC">USDC (Asset Token)</option>
                        <option value="DEBT_WXDAI">debtWXDAI (Debt Token)</option>
                        <option value="DEBT_USDC">debtUSDC (Debt Token)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="mock-amount">Montant:</label>
                    <input type="number" id="mock-amount" placeholder="1000" step="0.01" min="0">
                </div>

                <div class="form-group">
                    <label>Actions:</label>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <button type="button" id="mint-tokens" class="btn btn-success">ü™ô Mint Tokens</button>
                        <button type="button" id="burn-tokens" class="btn btn-warning">üî• Burn Tokens</button>
                        <button type="button" id="approve-tokens" class="btn btn-primary">‚úÖ Approuver pour
                            Rent2Repay</button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="approve-amount">Montant d'approbation:</label>
                    <input type="number" id="approve-amount" placeholder="500" step="0.01" min="0">
                </div>
            </div>
        </section>

        <!-- Logs -->
        <section class="logs-section">
            <div class="card">
                <h2>üìù Journaux d'Activit√©</h2>
                <div class="logs-controls">
                    <button id="clear-logs" class="btn btn-secondary">üóëÔ∏è Effacer</button>
                </div>
                <div id="logs" class="logs">
                    <p class="log-entry">Interface initialis√©e</p>
                </div>
            </div>
        </section>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <p>Transaction en cours...</p>
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>

</html>